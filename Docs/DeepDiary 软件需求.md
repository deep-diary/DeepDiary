# DeepDiary 软件需求报告

# 修订记录

| 版本信息 | 更新日志           | 日期      | 备注 |
| -------- | ------------------ | --------- | ---- |
| V1.0     | 初步整理了软件需求 | 2025.5.17 |      |
|          |                    |           |      |

1. ## 引言

### 1.1 项目概述

DeepDiary 是一个创新的个人记忆与资源管理平台，旨在通过整合多模态数据（如照片、视频、日记、聊天记录、GPS 轨迹等）以及用户的社交资源（技能、物品、时间）和需求（学习、帮助、协作），结合三大硬件设备——DeepGlass AI 眼镜、DeepArm AI 机械臂和 DeepToy AI 玩具控制器，为用户提供智能化的记忆管理、资源匹配和设备控制体验。平台利用 AI 技术、知识图谱和语音交互技术实现自然便捷的操作，同时通过强化隐私保护措施，确保用户数据的安全性。

### 1.2 编写目的

本文档旨在详细描述 DeepDiary 项目的软件需求，为开发团队提供清晰、全面、可执行的开发指南，确保项目能够按照预期的目标和功能进行开发，并最终交付高质量的软件产品。

### 1.3 目标读者

本文档的目标读者包括：

- 项目经理
- 系统架构师
- 开发人员
- 测试人员
- 相关利益干系人

### 1.4 术语和缩写

- **DeepDiary：** 个人记忆与资源管理平台
- **DeepGlass：** AI 眼镜
- **DeepArm：** AI 机械臂
- **DeepToy：** AI 玩具控制器
- **GUI：** 图形用户界面
- **API：** 应用程序编程接口
- **MQTT：** 消息队列遥测传输协议
- **RTSP：** 实时流传输协议
- **HLS：** HTTP Live Streaming
- **RESTful API：** 表征性状态转移 API
- **WebSocket：** 一种在单个 TCP 连接上进行全双工通信的协议
- **CLIP：** 一种用于图像和文本编码的神经网络模型
- **Sentence Transformers：** 一种用于计算句子和文本嵌入的 Python 库
- **FaceNet：** 一种用于人脸识别的神经网络模型
- **Immich: ** 一款开源的照片和视频管理平台
- **Mem0：** 一种记忆存储和个性化交互工具
- **Graphiti：** 一种实时知识图谱构建工具
- **Dify：** 一个应用程序开发平台，旨在使 AI 原生应用程序的构建变得简单

1. ## 总体需求

### 2.1 功能概述

DeepDiary 平台应具备以下核心功能：

- **多模态数据管理：** 支持照片、视频、日记、聊天记录、GPS 轨迹等多种类型数据的采集、存储、处理和查询。
- **资源匹配：** 基于用户的个人数据和社交资源，利用 AI 技术和知识图谱，实现用户之间技能、物品和需求的智能匹配。
- **设备控制与交互：** 支持通过 DeepWin 桌面应用、DeepWeb Web 应用以及语音交互等方式，实现对 DeepGlass、DeepArm 和 DeepToy 等硬件设备的控制和数据交互。
- **记忆管理与查询：** 提供智能化的记忆管理和查询功能，帮助用户高效地管理和回忆个人记忆，例如通过自然语言查询历史照片、日记等。
- **知识图谱构建：** 构建用户个人知识图谱，实现实体关系的可视化和查询，支持资源的追溯和关系的挖掘。
- **AI 助手：** 集成 AI 助手功能，支持用户通过自然语言进行交互，例如查询信息、控制设备等。

### 2.2 用户特点

DeepDiary 平台的主要用户包括：

- **有记忆管理需求的用户：** 希望能够集中管理和智能搜索个人多模态数据，方便回忆和追溯。
- **有资源匹配需求的用户：** 希望能够高效地找到具备特定技能或资源的人，或者找到能够满足自己需求的人。
- **DeepGlass 用户：** 需要使用 AI 眼镜进行辅助出行、社交互动和记忆管理。
- **DeepArm 用户：** 需要使用 AI 机械臂进行工业自动化、家庭服务或科研实验。
- **DeepToy 用户和开发者：** 需要使用 AI 玩具控制器进行智能玩具的开发和控制。

### 2.3 运行环境

DeepDiary 平台应能够在以下环境中稳定运行：

- **服务器端：**
  - 操作系统：Linux
  - 运行环境：Docker
  - 数据库：PostgreSQL, Qdrant/FAISS, Neo4j
  - 其他：EMQX, MediaMTX, Livekit, Dify
- **桌面端：**
  - 操作系统：Windows, macOS
- **Web 端：**
  - 浏览器：Chrome, Firefox, Safari, Edge 等主流浏览器
- **设备端：**
  - 操作系统：FreeRTOS (DeepGlass, DeepArm, DeepToy)
  - 硬件：ESP32-S3，ESP32-TWAI-CAN
- **开发环境**
  - Python
  - Vue.js
  - C/C++

1. ## 详细需求

### 3.1 DeepServer 需求

DeepServer 是 DeepDiary 平台的服务器端，负责数据存储、处理、API 服务、设备通信和 AI 功能。

#### 3.1.1 功能需求

- **数据管理：**
  - [REQ-DS-001]：支持多模态数据的接收、存储和管理，包括照片、视频、日记、聊天记录、GPS 轨迹等。
    - 照片和视频：通过 Immich API 接收上传的数据，提取元数据和 AI 信息（如人脸识别、物体识别等），并存储到相应的数据库和存储服务器中。
    - 日记和笔记：支持通过 Second-Me API 或自定义界面接收用户输入的文本数据，并进行存储。
    - 聊天记录：支持通过第三方工具或 API 导入聊天记录数据，并进行存储和索引。
    - GPS 轨迹：支持接收用户上传的 GPX/KML 文件，提取位置信息并进行存储。
  - [REQ-DS-002]：支持数据的分类、标签和索引，以便于后续的查询和检索。
  - [REQ-DS-003]：支持数据的备份和恢复，确保数据的安全性和可靠性。
  - [REQ-DS-004]：支持用户权限管理，控制用户对数据的访问权限。
  - **使用的开源项目**
    - PostgreSQL: 存储结构化数据，如用户、相册、标签等。
    - Qdrant/FAISS: 存储多模态数据的嵌入向量，支持相似性搜索。
    - Neo4j: 构建知识图谱，管理实体和关系。
    - PyMuPDF:  提取PDF文件中的文本和图像等信息
    - Librosa:  提取音频特征
- **API 服务：**
  - [REQ-DS-005]：提供 RESTful API，用于支持 DeepWin、DeepWeb 和 DeepDevice 等客户端的数据访问和功能调用。
    - 采用 cookiecutter-django (Python) 构建 RESTful API 服务器。
    - 明确 API 的端点、请求方法、参数、数据格式和返回结果。
  - [REQ-DS-006]：支持 API 的认证和授权，确保 API 的安全性。
  - **使用的开源项目**
    - cookiecutter-django:  构建 RESTful API 服务器。
- **设备通信：**
  - [REQ-DS-007]：支持 MQTT 协议，用于与 DeepGlass、DeepArm 和 DeepToy 等设备进行通信，实现设备控制和数据采集。
    - 部署 EMQX MQTT Broker 作为 DeepDiary 的 MQTT 消息服务器。
  - [REQ-DS-008]：支持流媒体协议（如 RTSP、HLS），用于接收和转发 DeepGlass 和 DeepArm 等设备上传的视频流数据。
    - 部署 MediaMTX 作为 DeepDiary 的流媒体服务器。
  - [REQ-DS-009]：支持实时语音通信，用于实现 DeepGlass 和 DeepArm 等设备的语音交互功能。
    - 部署 Livekit 服务器，实现设备与用户之间的实时语音通信。
  - [REQ-DS-010]：定义设备数据上报的格式和频率，以及设备控制指令的格式和协议。
  - **使用的开源项目**
    - EMQX: MQTT 消息服务器，用于设备通信。
    - MediaMTX: 流媒体服务器，用于视频流处理。
    - livekit: 实时语音服务器
- **AI 功能：**
  - [REQ-DS-011]：集成 CLIP 模型，用于提取图像和文本的特征向量，实现多模态数据的统一表示和相似性计算。
  - [REQ-DS-012]：集成 Sentence Transformers 模型，用于提取文本的特征向量，实现文本的语义表示和相似性计算。
  - [REQ-DS-013]：集成 FaceNet 模型，用于人脸识别，实现人脸检测、特征提取和比对等功能。
  - [REQ-DS-014]：集成 Dify 大模型工作流，实现自然语言处理、知识库问答等功能，为用户提供智能化的交互体验。
  - [REQ-DS-015]:  集成 Graphrag，增强知识图谱的检索能力
  - **使用的开源项目**
    - CLIP: 用于图像和文本的特征提取。
    - Sentence Transformers: 用于文本嵌入。
    - FaceNet: 用于人脸识别。
    - Dify: 大模型工作流服务器
    - Graphrag: 基于图的增强检索框架
- **用户分身:**
  - [REQ-DS-016]：将用户上传的各种数据（包括 GPS 轨迹信息、照片 EXIF 信息、日记、照片中的人物关系、微信好友关系、微信聊天记录、好友的三大资源、三大需求、所在城市等）进行融合，训练成为用户的数字分身。

#### 3.1.2 数据流程

1. **数据采集：**
   1. 照片和视频：通过 Immich API 上传和备份，DeepServer 通过 Immich 提供的 API 获取照片和视频数据。
   2. 日记和笔记：用户通过 DeepWin 或 DeepWeb 等客户端输入，DeepServer 接收并存储。
   3. 聊天记录：通过第三方工具或 API 导入，DeepServer 接收并存储。
   4. GPS 轨迹：用户通过手机或设备导出 GPX/KML 文件，上传到 DeepServer。
2. **数据处理：**
   1. 多模态数据处理：
      - 使用 PyMuPDF 提取 PDF 文件中的文本和图像。
      - 使用 Librosa 提取音频文件的音频特征。
      - 使用 OpenCV 对图像和视频进行预处理、特征提取和分析。
   2. Immich 数据处理：DeepServer 通过 Immich 提供的 API 提取照片和视频的元数据和 AI 信息（例如，人脸识别结果、物体识别结果、图像语义信息等）。
   3. 文本数据处理：使用 Sentence Transformers 生成文本嵌入向量。
3. **数据存储：**
   1. 结构化数据（如用户、相册、标签等）存储在 PostgreSQL 数据库中。
   2. 多模态数据的嵌入向量存储在 Qdrant/FAISS 向量数据库中，用于相似性搜索。
   3. 用户关系、资源关系等图数据存储在 Neo4j 图数据库中，用于知识图谱的构建和查询。
4. **数据查询：**
   1. 用户可以通过 DeepWin 或 DeepWeb 客户端，使用自然语言查询个人记忆和资源。
   2. DeepServer 接收到查询请求后，使用 CLIP 和 Sentence Transformers 将查询语句转换为向量，然后在 Qdrant/FAISS 中进行相似性搜索，并从 PostgreSQL 和 Neo4j 中获取相关数据，最终返回给客户端。

#### 3.1.3 接口需求

- **Immich API：**
  - 功能：用于照片和视频的管理，包括上传、下载、删除、查看元数据和 AI 信息等。
  - 数据格式：JSON
  - 认证方式：API Key
  - 需要调研 Immich API 的详细接口定义，包括 URL、参数、请求方法和返回结果。
- **Mem0 API：**
  - 功能：用于记忆存储和个性化交互，包括记忆的创建、检索、更新和删除等。
  - 数据格式：JSON
  - 认证方式：API Key
  - 需要调研 Mem0 API 的详细接口定义，包括 URL、参数、请求方法和返回结果。
- **Graphiti API：**
  - 功能：用于实时知识图谱构建，包括实体和关系的创建、查询和更新等。
  - 数据格式：JSON
  - 认证方式：API Key
  - 需要调研 Graphiti API 的详细接口定义，包括 URL、参数、请求方法和返回结果。
- **Dify API:**
  - 功能：大模型API 封装、Prompt 管理、知识库管理等
  - 数据格式：JSON
  - 认证方式：API Key
  - 需要调研 Dify API 的详细接口定义
- **设备通信接口：**
  - MQTT 接口：用于设备控制和数据采集，需要定义 Topic、消息格式和 QoS 等。
  - 流媒体接口：用于接收设备上传的视频流，需要支持 RTSP、HLS 等协议。
  - 实时语音接口：用于设备之间的实时语音通信

#### 3.1.4 部署需求

- [REQ-DS-017]：支持使用 Docker 进行快速部署。
- [REQ-DS-018]：支持部署到 AWS 或阿里云等云平台。
- [REQ-DS-019]：支持使用 GitHub Actions 进行 CI/CD，实现自动化构建、测试和部署。

### 3.2 DeepWin 需求

DeepWin 是 DeepDiary 平台的桌面 GUI 软件，为用户提供设备控制、数据管理和语音交互等功能。

#### 3.2.1 功能需求

- **设备连接与控制：**
  - [REQ-DW-001]：支持通过串口或网络连接 DeepGlass、DeepArm 和 DeepToy 等设备。
  - [REQ-DW-002]：支持向设备发送控制指令，例如控制机械臂的运动、控制玩具的动作等。
  - [REQ-DW-003]：支持接收设备上传的数据，例如传感器数据、视频流数据等。
  - [REQ-DW-004]：支持实时显示设备的运行状态和数据，例如机械臂的当前角度、玩具的电量等。
- **数据管理：**
  - [REQ-DW-005]：支持将设备采集的数据同步到 DeepServer，并与用户的个人记忆数据进行整合。
  - [REQ-DW-006]：支持对用户的多模态数据进行管理，例如查看、搜索、分类和编辑照片、视频、日记等。
    - 图像管理
      - 可以添加用户目录,提取该目录下的所有照片
      - 提取所有照片的数据保存到本地及云端数据库,为其创建索引信息。提取的数据应包括照片的 元数据,比如gps,长宽等,照片包含的人脸数据,照片包含的物体,整个照片的语义信息,便 于进行相似性检索,最终实现多维度搜索
      - 照片识别: 可以实现人脸,手势,骨骼,表情等识别,可以读懂用户当前的情绪,可以采集保存人脸照片
      - 人脸照片墙:可以将一个文件夹中所有的人脸照片,根据一定的算法,拼接成人脸照片墙,用户可以指定照片墙的长宽比,具体照片墙大小,根据照片总数量来自动决定
      - 照片上传:用户可以选择性的上传图像
  - [REQ-DW-007]：支持对人脸照片进行管理，例如命名、搜索和分组。
    - 人脸管理
      - 可以对人脸照片进行命名,相似搜索,人名搜索
      - 组织搜索,比如A,B都属于组织Z,那么搜索Z的时候就会出现A,B人脸,点击人脸,即可查看对应的所有信息,包括所有的人脸照片，身份，三大资源，三大需求等信息
- **语音交互：**
  - [REQ-DW-008]：支持语音控制，用户可以通过语音指令控制设备和操作系统，例如“打开相机”、“播放视频”、“查询天气”等。
  - [REQ-DW-009]：支持语音输入，用户可以通过语音输入文本、日记等内容。
  - [REQ-DW-010]：支持语音合成，可以将文本转换为语音进行播放。
- **其他功能：**
  - [REQ-DW-011]：支持文件目录管理，例如浏览、复制、移动和删除文件。
  - [REQ-DW-012]：支持摄像头管理，例如检测和切换摄像头，将视频流传输到 DeepWeb。
  - [REQ-DW-013]：支持嵌入式 API，实现云台控制、视频处理、图像处理、追踪、人脸网格识别、手势识别、摄像头处理、协议解析和数据可视化等功能。
    - 云台控制
      - 支持云台的控制，俯仰，旋转
      - 支持云台自动追踪
    - 视频处理
      - ⽀持本地视频和⽹络视频流
      - 视频流、⾳频流的同步和异步处理
      - ⽀持视频流的录制、暂停、继续、停⽌
      - ⽀持视频流的分辨率切换
      - ⽀持视频流的格式转换
    - 语⾳处理
      - ⽀持语⾳的录制、播放、暂停、继续、停⽌
      - ⽀持语⾳的格式转换
      - ⽀持语⾳识别，将语⾳转换为⽂字
      - ⽀持语⾳合成，将⽂字转换为语⾳
      - ⽀持语⾳唤醒，通过特定的关键词唤醒系统
    - 图像处理
      - 图⽚处理主要是在后台处理，对应上位机的功能多选下拉列表
    - 追踪基类
      - ⽬标检测与追踪
      - 多种滤波算法⽀持（卡尔曼滤波、均值滤波）
      - 历史轨迹记录与可视化
      - 误差计算（像素误差和归⼀化误差）
      - 透明度渐变的轨迹显⽰
    - ⼈脸⽹格识别类
      - 600+点⼈脸特征点检测
      - 眼球追踪和视线⽅向估计
      - 表情识别（眨眼、张嘴等）
      - 头部姿态估计（俯仰、偏航、翻滚⻆）
      - ⼈脸距离估计
      - 实时状态显⽽和可视化
    - ⼿势识别类
      - 多⼿同时检测
      - ⼿指关节点检测
      - ⼿势分类（握拳、OK ⼿势等）
      - ⼿指开合度量化
      - 深度估计
      - 可视化显⽰
    - 摄像头处理
      - 多处理器⽀持
      - 实时 FPS 显⽽
      - 处理结果可视化
      - 云台⾃动追踪控制
      - 滤波后的平滑控制
    - 嵌入式API
      - 获取当前设备的电量
      - 获取当前设备的 GPS 信息
      - 获取当前设备的 IMU 信息
      - 获取当前设备的 Wi-Fi 状态
      - 获取当前设备的蓝牙状态
      - 获取当前设备的 CAN 总线状态
      - 获取当前设备的系统时间
      - 获取当前设备的存储空间信息
      - 获取当前设备的传感器列表
      - 获取当前设备的日志
      - 获取当前设备的配置信息
      - 获取当前系统时间，并进⾏格式化
      - 获取当前⽤户名
      - 获取当前进程 ID
      - 获取当前系统信息，包括操作系统、版本等
      - 获取当前⽹络信息，包括⽹卡、IP 地址等
      - 获取当前运⾏的进程列表
      - 获取当前系统的 CPU 使⽤率
      - 获取当前系统的内存使⽤率
      - 获取当前系统的磁盘使⽤率
      - 获取当前系统的⽹络流量
      - 获取当前系统的电池状态（如果⽀持）
      - 获取当前系统的屏幕亮度
      - 获取当前系统的⾳量
      - 获取当前系统的语⾔设置
      - 获取当前系统的时区设置
      - 获取当前系统的位置信息
      - 获取当前系统的传感器数据
      - 获取当前系统的⽇志
      - 获取当前系统的配置信息
      - 获取当前系统的环境变量列表
      - 获取当前系统的特定环境变量的值
      - 获取系统 IP 地址，对 IP 地址进⾏定位
        - 获取当前设备的 IP 地址
        - 使⽤ IP 地址定位获取经纬度
        - 根据经纬度获取城市信息
  - [REQ-DW-014]：支持通过 Second-Me API 或自定义界面输入日记和笔记。
  - [REQ-DW-015]：支持与 DeepServer 进行数据同步和通信。
  - [REQ-DW-016]：支持 Docker 快速部署。
  - **使用的开源项目**
    - PySide6-Fluent-Widgets:  构建用户界面。

#### 3.2.2 界面需求

- DeepWin 的界面应采用现代化的设计风格，美观、简洁、易用。
- DeepWin 的界面应支持多窗口和多标签页，方便用户同时进行多项任务。
- DeepWin 的界面应支持自定义主题和布局，满足用户的个性化需求。
- DeepWin 的界面应支持国际化，支持多语言显示。
- DeepWin 的界面需要清晰地展示设备连接状态、数据同步进度、设备运行状态等信息。
- DeepWin 的界面需要提供直观的设备控制方式，例如通过按钮、滑块、摇杆等。
- DeepWin 的界面需要支持语音输入和输出，提供自然、便捷的交互方式。
- DeepWin 的界面需要支持数据可视化，例如将传感器数据以图表的形式展示。

### 3.3 DeepWeb 需求

DeepWeb 是 DeepDiary 平台的 Web 界面，为用户提供数据查看、设备控制和资源匹配等功能。

#### 3.3.1 功能需求

- **用户认证与授权：**

  - [REQ-DB-001]：支持用户登录和注册，并提供密码找回功能。
  - [REQ-DB-002]：支持用户的角色管理和权限控制，确保数据的安全性。

- **数据查看与管理：**

  - [REQ-DB-003]：支持用户查看和搜索其在 DeepDiary 平台上的多模态数据，包括照片、视频、日记、聊天记录和 GPS 轨迹等。
  - [REQ-DB-004]：支持用户对数据进行分类、标签和编辑。
  - [REQ-DB-005]：支持人脸照片的显示、检索和管理

- **设备控制与状态查看：**

  - [REQ-DB-006]：支持用户远程查看和控制 DeepGlass、DeepArm 和 DeepToy 等设备的运行状态。
  - [REQ-DB-007]：支持用户通过 Web 界面发送控制指令给设备。
  - [REQ-DB-008]：支持实时显示设备上传的视频流和传感器数据。

- **资源匹配：**

  - [REQ-DB-009]：支持用户查看和搜索平台上的其他用户及其资源（技能、物品、时间）和需求。
  - [REQ-DB-010]：支持用户发布自己的资源和需求信息。
  - [REQ-DB-011]：基于用户的个人数据和资源需求，使用 AI 算法进行智能匹配，并向用户推荐潜在的合作伙伴。

- **记忆查询:**

  - [REQ-DB-012]: 支持用户通过自然语言进行记忆查询

- **其他功能：**

  - [REQ-DB-013]：支持用户查看个人资料和社交网络信息。
  - [REQ-DB-014]：支持用户之间的私信和群聊功能。
  - [REQ-DB-015]：支持系统通知和消息推送。

#### 3.3.2 界面需求

- DeepWeb 的界面应采用现代化的设计风格，美观、简洁、易用。
- DeepWeb 的界面应支持响应式设计，能够在不同尺寸的屏幕上良好显示。
- DeepWeb 的界面应支持自定义主题和布局，满足用户的个性化需求。
- DeepWeb 的界面应支持国际化，支持多语言显示。
- DeepWeb 的界面需要清晰地展示用户的个人数据、设备状态、资源信息和匹配结果。
- DeepWeb 的界面需要提供便捷的设备控制方式和数据交互方式。

### 3.4 Deep Device 设备端

Deep Device 包含 DeepGlass、DeepArm 和 DeepToy 三个硬件设备，它们是 DeepDiary 平台与现实世界交互的桥梁。

#### 3.4.1 DeepGlass 需求模块

DeepGlass 是一款 AI 眼镜，旨在为用户提供更加自然、便捷的交互方式。它集成了多种传感器和通信模块，能够实现语音交互、视觉信息采集、辅助出行、社交陪伴等功能。

- **硬件需求：**
  - [REQ-DG-001]：配备高清摄像头，支持拍照、录像和实时视频传输。
  - [REQ-DG-002]：内置麦克风和扬声器，支持语音输入和输出。
  - [REQ-DG-003]：配备多种传感器，如陀螺仪、加速度计、磁力计等，用于姿态检测和运动跟踪。
  - [REQ-DG-004]：支持 Wi-Fi 和蓝牙连接，实现与 DeepServer 和其他设备的通信。
  - [REQ-DG-005]：内置 GPS 模块，支持定位和导航功能。
  - [REQ-DG-006]：配备触摸板或按键，支持用户进行基本操作。
  - [REQ-DG-007]：采用轻量化设计，佩戴舒适，续航时间满足日常使用需求。
- **软件需求：**
  - [REQ-DG-008]：支持拍照和录像，并将照片和视频上传到云端。
  - [REQ-DG-009]：支持实时识别人脸和场景，并将识别结果发送到服务器进行处理。
  - [REQ-DG-010]：支持实时视频流传输，并可将视频流录制和存储。
  - [REQ-DG-011]：支持语音输入和输出，实现与用户的语音交互。
  - [REQ-DG-012]：支持语音指令识别和自然语言处理，用户可以通过语音控制眼镜。
  - [REQ-DG-013]：支持语音通话和语音留言功能。
  - [REQ-DG-014]：集成语音交互和摄像头，提供实时导航和障碍物检测功能，帮助盲人安全出行。
  - [REQ-DG-015]：支持语音聊天功能，并建立盲人社区平台，方便用户分享和交流。
  - [REQ-DG-016]：与 DeepDiary 平台对接，支持用户通过语音查询个人记忆，例如“去年我去哪旅行了？”。
  - [REQ-DG-017]：支持用户通过语音提出资源需求，眼镜从平台匹配最佳资源。
  - [REQ-DG-018]：支持通过眼镜自带的按键进行操作和交互。
  - [REQ-DG-019]：支持与 DeepServer 进行数据同步，包括用户数据、记忆数据、设备数据等。

#### 3.4.2 DeepArm 需求模块

DeepArm 是一款 AI 机械臂，旨在通过集成语音和视觉交互功能，使其成为一个智能客服，为用户提供更加便捷的自动化解决方案。

- **硬件需求：**
  - [REQ-DA-001]：配备高精度电机和传感器，实现精确的运动控制。
  - [REQ-DA-002]：配备摄像头，支持图像和视频采集。
  - [REQ-DA-003]：内置麦克风和扬声器，支持语音输入和输出。
  - [REQ-DA-004]：支持多种通信接口，如 CAN、串口、以太网等，便于与其他设备集成。
  - [REQ-DA-005]：采用模块化设计，便于组装和维护。
- **软件需求：**
  - [REQ-DA-006]：支持通过电脑上位机（DeepWin）发送指令调试和控制机械臂。
  - [REQ-DA-007]：支持串口转 CAN 等通讯协议。
  - [REQ-DA-008]：支持示教功能的控制，如开始示教、结束示教、执行示教等。
  - [REQ-DA-009]：将机械臂的实时位置反馈给上位机，进行实时显示。
  - [REQ-DA-010]：将机械臂的相关状态数据实时反馈到云端 DeepServer。
  - [REQ-DA-011]：支持通过串口将状态数据同步给电脑上位机。
  - [REQ-DA-012]：支持语音控制，用户可以通过自然语言控制机械臂。
  - [REQ-DA-013]：支持语音指令的自定义和扩展。
  - [REQ-DA-014]：支持通过摄像头进行视频识别，例如物体识别、人脸识别等。
  - [REQ-DA-015]：根据视频识别结果，自动调整机械臂的动作。
  - [REQ-DA-016]：支持 Wi-Fi 连接，实现与云端的通信。
  - [REQ-DA-017]：支持通过云端进行设备的远程控制和管理。
  - [REQ-DA-018]：基于 RAG 技术构建产品知识库，使机械臂具备智能客服功能，实时解答用户疑问。
  - [REQ-DA-019]：支持知识库的更新和扩展。

#### 3.4.3 DeepToy 需求模块

DeepToy 是一款 AI 玩具控制器，旨在为玩具厂商提供快速实现产品开发的平台，使玩具具备语音交互功能，并可与 DeepWin 互动。

- **硬件需求：**

  - [REQ-DT-001]：提供丰富的硬件接口，例如 IO、PWM、SPI、I2C、CAN 等，便于厂商快速集成。
  - [REQ-DT-002]：支持多种传感器和执行器的连接。
  - [REQ-DT-003]：配备音频输入输出接口，支持语音交互功能。
  - [REQ-DT-004]：配备视频输入接口，支持视频数据的采集。
  - [REQ-DT-005]：支持多种通信方式，如 Wi-Fi、蓝牙等，实现与云端的连接。

- **软件需求：**

  - [REQ-DT-006]：支持语音和视频识别，用户可以通过多种方式与玩具互动。

  - [REQ-DT-007]：支持语音指令识别和自然语言处理。

  - [REQ-DT-008]：支持视频数据的采集和处理。

  - [REQ-DT-009]：将玩具状态和视频数据上传至云端，打通 AI 功能。

  - [REQ-DT-010]：支持云端的远程控制和管理。

  - [REQ-DT-011]：支持云端的 AI 算法调用，例如语音识别、图像识别等。

  - [REQ-DT-012]：支持与 DeepWin 进行数据交换和功能互动，实现玩具与桌面应用的联动。

  - [REQ-DT-013]：提供数据加密、访问控制和用户可选隐私选项，确保数据安全。

  - [REQ-DT-014]：符合相关的隐私保护法规和标准。

  - [REQ-DT-015]：提供用户隐私设置界面。

  - [REQ-DT-016]：支持对外设接口的名称进行配置。

  - [REQ-DT-017]：支持对外设接口的数据解析方式进行配置。

  - [REQ-DT-018]：提供常用的外设接口配置模板。

    1. ##  非功能需求

  -  4.1 性能需求

  - **响应时间：** 系统对用户操作的响应时间应在 2 秒以内。

  - **并发处理能力：** 系统应支持至少 1000 个并发用户。

  - **数据存储容量：** 系统应支持 TB 级别的数据存储。

  - **设备连接数：** 系统应支持至少 10000 个设备的并发连接。

  -  4.2 安全性需求

  - **用户认证：** 系统应支持用户登录和身份验证，防止未授权访问。

  - **数据加密：** 用户数据在传输和存储过程中应进行加密处理，防止数据泄露。

  - **访问控制：** 系统应支持细粒度的权限管理，控制用户对不同资源的访问权限。

  - **安全审计：** 系统应记录用户的操作日志，便于安全审计和问题追踪。

  - **隐私保护：** 系统应遵循相关的隐私保护法规，保护用户个人数据的隐私。

    - 提供数据加密、访问控制和用户可选隐私选项，确保数据安全。
    - 符合相关的隐私保护法规和标准。
    - 提供用户隐私设置界面。

  -  4.3 可靠性需求

  - **系统稳定性：** 系统应稳定可靠，能够 7x24 小时持续运行。

  - **容错能力：** 系统应具备一定的容错能力，能够处理硬件故障、网络异常等情况。

  - **数据备份与恢复：** 系统应支持定期数据备份，并能够在发生故障时快速恢复数据。

  - **监控与报警：** 系统应具备完善的监控和报警机制，能够及时发现和处理问题。

  -  4.4 可维护性需求

  - **模块化设计：** 系统应采用模块化设计，便于开发、测试和维护。

  - **代码规范：** 系统应遵循统一的代码规范，提高代码的可读性和可维护性。

  - **日志管理：** 系统应提供完善的日志管理功能，便于问题排查和系统维护。

  - **自动化部署：** 系统应支持自动化部署，减少人工干预，提高部署效率。

  -  4.5 可扩展性需求

  - **水平扩展：** 系统应支持通过增加服务器节点来实现水平扩展，提高系统的并发处理能力和吞吐量。

  - **垂直扩展：** 系统应支持通过升级硬件配置来实现垂直扩展，提高系统的处理能力。

  - **模块化扩展：** 系统应支持新增模块，以扩展系统的功能。

    1. ##  与外部系统的集成

  -  5.1 Immich 集成

  - **功能描述:**

    - 从 Immich 获取照片和视频数据，以及相关的元数据和 AI 信息（例如人脸识别结果、对象识别结果等）。
    - 将获取的数据保存到 DeepDiary 的数据库中，并与 DeepDiary 的其他数据进行融合。

  - **技术实现:**

    - 调研 Immich 提供的 API，确定需要调用的接口和数据格式。
    - 在 DeepServer 中实现与 Immich API 的集成，获取数据并进行转换。
    - 将转换后的数据保存到 DeepDiary 的数据库中。

  - **集成开源项目:** Immich

  -  5.2 Mem0 集成

  - **功能描述:**

    - 将用户的记忆数据存储到 Mem0 中，实现记忆的长期保存和管理。
    - 从 Mem0 中检索用户的记忆数据，并在 DeepDiary 中展示。

  - **技术实现:**

    - 调研 Mem0 提供的 API，确定需要调用的接口和数据格式。
    - 在 DeepServer 中实现与 Mem0 API 的集成，实现数据的存储和检索。
    - 根据 DeepDiary 的数据模型，将 Mem0 中的数据转换为 DeepDiary 的格式。

  - **集成开源项目:** Mem0

    1. ##  术语表

  - | 术语       | 定义                                                         |
    | ---------- | ------------------------------------------------------------ |
    | DeepDiary  | 项目名称，个人记忆与资源管理平台。                           |
    | 记忆       | 用户在生活中产生的各种数据，包括照片、视频、日记、聊天记录、GPS 轨迹等。 |
    | 资源       | 用户具备的可以为他人提供的服务，或者别人愿意付费来获取的服务，例如技能、物品、时间等。 |
    | 需求       | 别人愿意付费来寻找资源帮助自己解决的事情。                   |
    | DeepServer | DeepDiary 平台大脑，是平台数据库、API 和大模型交互的中枢，通常指系统的服务器端。 |
    | DeepWin    | DeepDiary 的桌面 GUI 软件，是云端、串口设备的中间桥梁，让串口设备具备语音交互、大模型等功能。 |
    | DeepWeb    | DeepDiary 的 Web 界面，便于用户随时随地访问系统资源。        |
    | DeepDevice | DeepDiary 的设备端，包括 DeepGlass AI 眼镜、DeepArm AI 机械臂和 DeepToy AI 玩具控制器等硬件设备。 |

  - 
